<!doctype html>
<html>
<head>
    <title>Drug Info Search</title>
    <script>
        function addCondition() {
            var conditionDiv = document.createElement('div');
            conditionDiv.className = 'condition';
            conditionDiv.innerHTML = `
                <select name="column">
                    <option value="업체명">업체명</option>
                    <option value="제품명">제품명</option>
                    <option value="주성분">주성분</option>
                    <option value="첨가제">첨가제</option>
                    <option value="허가일">허가일</option>
                    <option value="제조/수입">제조/수입</option>
                    <option value="모양">모양</option>
                    <option value="장축">장축</option>
                    <option value="단축">단축</option>
                    <option value="수입제조국">수입제조국</option>
                    <option value="주성분영문">주성분영문</option>
                </select>
                <input type="text" name="query" placeholder="Enter search term">
                <button type="button" onclick="removeCondition(this)">-</button>
            `;
            document.getElementById('conditions').appendChild(conditionDiv);
        }

        function removeCondition(button) {
            var conditionDiv = button.parentElement;
            document.getElementById('conditions').removeChild(conditionDiv);
        }

        function submitSearch(event) {
            event.preventDefault(); // 폼 제출 방지

            const formData = new FormData(event.target);
            const params = new URLSearchParams(formData);

            fetch('/search', {
                method: 'POST',
                body: params
            })
            .then(response => response.text())
            .then(html => {
                document.getElementById('results').innerHTML = html;
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</head>
<body>
    <h1>Drug Info Search</h1>
    <form id="searchForm" onsubmit="submitSearch(event)">
        <div id="conditions">
            <div class="condition">
                <select name="column">
                    <option value="업체명">업체명</option>
                    <option value="제품명">제품명</option>
                    <option value="주성분">주성분</option>
                    <option value="첨가제">첨가제</option>
                    <option value="허가일">허가일</option>
                    <option value="제조/수입">제조/수입</option>
                    <option value="모양">모양</option>
                    <option value="장축">장축</option>
                    <option value="단축">단축</option>
                    <option value="수입제조국">수입제조국</option>
                    <option value="주성분영문">주성분영문</option>
                </select>
                <input type="text" name="query" placeholder="Enter search term">
                <button type="button" onclick="addCondition()">+</button>
            </div>
        </div>
        <div>
            <label for="global_operator">Global Operator:</label>
            <select id="global_operator" name="global_operator">
                <option value="AND">AND</option>
                <option value="OR">OR</option>
            </select>
        </div>
        <input type="submit" value="Search">
    </form>

    <div id="results"></div>
</body>
</html>
